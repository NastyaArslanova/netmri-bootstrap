language: python
matrix:
  include:
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9
    env: TOXENV=py39
  - python: 3.7
    env: TOXENV=py3pep8
  - python: 3.7
    env: TOXENV=docs
before_install:
- pip install codecov tox
script:
- tox
after_success:
- codecov -e TOXENV
deploy:
  provider: pypi
  username: __token__
  password:
    secure: MQg0PGAdg3n3Wa1bm7SQ87AFIXHPt0lHyLwpPCL4iJ3Oh8Xbx2zC6gStZDv1X+Fqa65D6iKKI8YOa2zLrbYjPcZrXaq3nSWAwcUA6aTH0ifzlRymzZEQHyiBJCg1lXBQ/7b2fvKjoCTL8HApMB4W5yme5CUz4F/nliNY7bseDozFCGKnrH/+6kPttHsyzmURus/iJA5CyfznsOTKuhYSWm57p/45DiFuj6VFOinRTYIK9HZcbAo7DoGDK2abqGH7bOxuCEc1SAfnpTjlxo/E33LizDFWE5TDxL9VORnke64c0lgB7s1FfsWP0aIN5wnayW6GjzsLXoK5qtQhD5YsZp+ihZVdcpqiCpnKb2Z/q6UzMzpv9pw5cRzE8KzZ3tQx/o2d9V4NUkHzGCVIf5dIJDR7E9GM32bItM/0t5ufsxldo4FKM0IGBkhZDWdEMw8OAWlu6mht3coOmeWIpABC//V2n+dzESGitzy1EzUub469F97pMObbt+pw4JVSyYzQ3Hf97NCCjx8hNRVbhptdW3iSqyWFfCslciIGqnGMttOau5C2sKPgK6b1pulS2XJ1a1DOuIKLvdDOWZzfRbUQYGLfSLsRvnGxsg1q2uC18gcwvPjDKUEa6eNeXOSmW6feFpwxKhw0rzrt54Wv29m1tQ/A1d+LmuFtCCsgNquQnsM=
  skip_existing: true
  distributions: sdist bdist_wheel
  server: https://test.pypi.org/legacy/
  true:
#    tags: true
    condition: $TOXENV == py37
    all_branches: true
