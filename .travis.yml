language: python
matrix:
  include:
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9
    env: TOXENV=py39
  - python: 3.7
    env: TOXENV=py3pep8
  - python: 3.7
    env: TOXENV=docs
before_install:
- pip install codecov tox
script:
- tox
after_success:
- codecov -e TOXENV
deploy:
  provider: pypi
  username: __token__
  password: pypi-AgENdGVzdC5weXBpLm9yZwIkZTNhZDBmOTktNGIzMS00YzE0LTk1N2QtNTYwNTU3YmQyOTQ5AAIleyJwZXJtaXNzaW9ucyI6ICJ1c2VyIiwgInZlcnNpb24iOiAxfQAABiB9riR7BP0lNvzHGeGnmXhRJFMYFs3d4LLXHoiEaZDHSg
#    secure: WHJo9qpKkkpdgv2A8aIAifwC4LIYzV+J/uSbtQFUNI+ZAonYtmqtVKoEoflI2aca4fYcw/gij5IX184cVUXbN52G0PQOZZ9aVjD36hnNR4u1vEdILybFrARqWEJcTFDHkAAWEfY3S+ogkbyMRi7T0q8AMriKbCNqsGTZ8PhU6hyh1E2FH7bcH0khOvsGOXon5jEGsJkF4hXD5E1Z+aVNbdijaLMX5i3J2shNqqqUT2plmuOqvhzm8pujyclQrIunW9Ia6BSbmvNSI9KQSZLauRSAHSIh0eht8rlRKi4DPejtLB1jZb4/0pHC3rp0TA4KdKwne73ZSdcjNM26dLKixFEzzV0N3f8KlkczVcB1v7qjB2J1wK/X6y0UiHkU9KEEddaM/PuCP05LF9Lv1mxzUWTkNHTUC1szEWrrifqxQJj3gN/thJNEAX0Topl4vyOhZcHiVHaMfb60M6EF6nLZsOV+7wO1hPcbX5BFZgCbp4qdPTWxcoKmhuvuJInfsSyY3HxcQGiOwPUguzCMvO8iaQ/65IPY4qftiF1OoFK8QTh1j5PNFEe0fFlpyEaJBHA9PjApPtGSbazR67KnjDEaWx0v9S/EdMtt9bc66NHxJxRb2/LSJGfT+4cj1S5d7WgI5+t+xBNd+QpJtnj72XKiL94HRjqOZqyfhVOU7Nt7Gf8=
  skip_existing: true
  distributions: sdist bdist_wheel
  server: https://test.pypi.org/legacy/
  true:
    condition: $TOXENV == py37
    all_branches: true
