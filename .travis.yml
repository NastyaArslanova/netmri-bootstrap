language: python
matrix:
  include:
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9
    env: TOXENV=py39
  - python: 3.7
    env: TOXENV=py3pep8
  - python: 3.7
    env: TOXENV=docs
before_install:
- pip install codecov tox
script:
- tox
after_success:
- codecov -e TOXENV
deploy:
  provider: pypi
  username: __token__
  password:
    secure: NnEnTEetENckbW5B4Spj7yWnUnpzO7qheXSkED+u3iuCRHDjhil6rBskWs4XUeMJ8SkalVQaEykr2tgWXzjKV4zqDjjxMXdVAhxC6uiOQcb/r9+YEGizJ7e21wuGk2XnsckM3LhUwsbASehZopoPwlwhtOPPHAUydctfhgFklnfH7c3EYh2EvVyGDgx+CPofaJgyQtsv28PeycLQBO6M0UV+8wZTQbYUliUFTHv5WsdxHN+ezRC+el1enUYJmTo2eNU+pGBueBPaXXEaV6YDFb87CV0nRbmLfbk6dbbeuuJnVMmFL1WbcRieGBBfbg2X+RldDEFSl0u8I6C3Lscje9G4g+PpUhwzToluLIPer57oYjqkCoSuYODAaJMooxFqsOjWs78EIXgyMDJ2yJWMSHUylb6fpwnCZxymJf41xnmHiBQhHXvqMXZmTG/CPiWDpKEu1dVC5JTGKMBqVQUefH+F7TVAKjRP50bAN/TcfWvyGkJaHMCnaEFEVSNYJhZuIh+ZTZBHKMUEJJc4KMA4xiSenJoCMMNgSIJWs50/R5A2gQz4ys9v57akwzHkUmpxbyDrktKMHPFDdDELUYBThyh+5UIkXk3fDPBblrSptsNhGH2V1OqK5xR8I0wquZmltSBp6xlLYyok9LaxoP/TFtiK5no6Ivftmhs2O+ZnENA=
  skip_existing: true
  distributions: sdist bdist_wheel
  server: https://test.pypi.org/legacy/
  true:
    condition: $TOXENV == py37
    all_branches: true
