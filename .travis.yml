language: python
matrix:
  include:
  - python: 3.7
    env: TOXENV=py37
  - python: 3.8
    env: TOXENV=py38
  - python: 3.9
    env: TOXENV=py39
  - python: 3.7
    env: TOXENV=py3pep8
  - python: 3.7
    env: TOXENV=docs
before_install:
- pip install codecov tox
script:
- tox
after_success:
- codecov -e TOXENV
deploy:
  provider: pypi
  username: __token__
  password:
    secure: GB68lYvfXoYJXupXgmDOoJ6WlYArfHCY1sKbFFZ9eEP/pveBp/uhncFROzsrXiUWPAYzNbJNg3jAIvQbzv94DCv2BmdKEHgFAmZ0jRgSovT2jo8cw6VZ1TXqrP3Y3V1ZqiWV2YDH8wO92NQ84OPQG4z6cAYJEKLKRcG+xBqDaJemcX34IVXIbUx6rqozgUuKkelk1frUep9dkNcp8widK3OE6eOZFMMdCC40cjgyLmYYrMJ1zYRF9tFN7+hSDv1+dtaT1DJOszyMUb6CtidJNreNZwMSY58bt8OgqarhroFRbpRZHDzSjgxnzdyVsDQA6KxiXioeASkq43du0uXBxh3/cIVz6E7/t0W5PIyGlpmRtvUNDmfOEWIQpYayjvLOZz8Dn7MsLJqIqXdiEaU7iyHpYJ0F0qD7OwccrtiUdfR1meTGVHptEjUDrSqIEcSYIdOk1Hnfs02pUse3DSglOojT32d1xbbC5LveQ1y2xXWmAjXqgte+41k7XFOXWNSVKT8EIsxAp1qAZW33dZ6O8ct2IdU6b/PJa2XNjHgsqH05WGkQPE9KULlAC+j3he5xPLTQ7EkO9R2cVmDHtcfD6hyAl5u0S7ClqhMYRfw0vVGMYrFOdrMEQblUbPxHLu7282f1Cd4heolBrbi2IeZgS5qp1BHRKVSdtSd+Iyx+FTk=
  skip_existing: true
  distributions: sdist bdist_wheel
  server: https://test.pypi.org/legacy/
  true:
    condition: $TOXENV == py37
    all_branches: true
